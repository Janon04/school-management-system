{% extends 'base.html' %}
{% load static %}

{% block title %}User Profile - SMS{% endblock %}

{% block content %}
<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
    <h1 class="h2">
        <i class="bi bi-person"></i> User Profile
    </h1>
    <div class="btn-toolbar mb-2 mb-md-0">
        <a href="{% url 'accounts:user_list' %}" class="btn btn-sm btn-outline-secondary">
            <i class="bi bi-arrow-left"></i> Back to List
        </a>
        {% if user.is_admin or user.is_staff_member or user.is_superuser %}
        <a href="{% url 'accounts:profile_update' %}?user_id={{ user_obj.pk }}" class="btn btn-sm btn-primary">
            <i class="bi bi-pencil"></i> Edit Profile
        </a>
        {% endif %}
    </div>
</div>

<div class="row">
    <div class="col-md-4">
        <div class="card mb-4">
            <div class="card-body text-center">
                {% if user_obj.profile_picture %}
                    <img src="{{ user_obj.profile_picture.url }}" alt="Profile" class="img-fluid rounded-circle mb-3" style="width: 120px; height: 120px; object-fit: cover;">
                {% else %}
                    <div class="avatar-circle mb-3" style="width: 120px; height: 120px; background: #e9ecef; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2.5rem; color: #6c757d;">
                        {{ user_obj.first_name.0|upper|default:"U" }}{{ user_obj.last_name.0|upper|default:"" }}
                    </div>
                {% endif %}
                <h4 class="mb-1">{{ user_obj.get_full_name|default:user_obj.username }}</h4>
                <p class="text-muted mb-3">
                    <span class="badge bg-primary">
                        <i class="bi bi-shield-check"></i> {{ user_obj.get_role_display|default:"User" }}
                    </span>
                </p>
                <p class="text-muted small">
                    <i class="bi bi-envelope"></i> {{ user_obj.email }}
                </p>
            </div>
        </div>
    </div>
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">Profile Information</h5>
            </div>
            <div class="card-body">
                <table class="table">
                    <tr>
                        <th>Username:</th>
                        <td>{{ user_obj.username }}</td>
                    </tr>
                    <tr>
                        <th>Email:</th>
                        <td>{{ user_obj.email }}</td>
                    </tr>
                    <tr>
                        <th>Phone:</th>
                        <td>{{ user_obj.phone_number|default:"Not provided" }}</td>
                    </tr>
                    <tr>
                        <th>Address:</th>
                        <td>{{ user_obj.address|default:"Not provided" }}</td>
                    </tr>
                    <tr>
                        <th>Date of Birth:</th>
                        <td>{{ user_obj.date_of_birth|default:"Not provided" }}</td>
                    </tr>
                    <tr>
                        <th>Status:</th>
                        <td>
                            {% if user_obj.is_active %}
                                <span class="badge bg-success">Active</span>
                            {% else %}
                                <span class="badge bg-danger">Inactive</span>
                            {% endif %}
                        </td>
                    </tr>
                    <tr>
                        <th>Joined:</th>
                        <td>{{ user_obj.date_joined|date:"F d, Y" }}</td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
</div>
{% endblock %}
